{{- $blog := slice -}}

{{- range where site.RegularPages.ByPublishDate.Reverse "Section" "==" "blogs" -}}
  {{- $item := dict
    "Title" .Title
    "PublishDateFormatted" (.PublishDate.Format "2006-01-02")
    "RelPermalink" .RelPermalink
    "PlainContent" .Plain -}}

  {{- $blog = $blog | append $item -}}
  {{ range .Translations }}
    {{- $translated_item := dict
      "Title" (.Title | i18n | default .Title)
      "PublishDateFormatted" (.PublishDate.Format "2006-01-02")
      "RelPermalink" .RelPermalink
      "PlainContent" .Plain -}}
    {{- $blog = $blog | append $translated_item -}}  
  {{ end }}
{{- end -}}

{{- $object := dict "blog" $blog -}}

{{- if (eq site.Params.search_minify true) -}}
  {{- $object | jsonify -}}
{{- else -}}
  {{- $jsonifyOptions := dict "indent" "  " -}}
  {{- $object | jsonify $jsonifyOptions -}}
{{- end -}}